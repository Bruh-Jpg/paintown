Import('use');

def isWindows():
    import re
    import sys
    return "win32" in sys.platform

obj_files = []

def addFiles( files ):
	obj_files.append( map( lambda x: x.replace('src/', ''), files ) )

import sys
sys.path.append("../scons")
import helpers

obj_files = []

filelist = helpers.read_cmake_list("../cmake/FileList.cmake")

for i in filelist:
    addFiles(filelist[i])

scripts = Split("""
script/modules/paintown.py
""");

def icon():
    if isWindows():
        return ['windows/game.res']
    else:
        return []

x = []
x.append(use.Program( 'paintown', obj_files + ['xmain.cpp'] + icon()))
x.append(use.Zip('scripts', scripts))
#x.append( use.Program( 'test', obj_files + ['test.cpp'] ) )
#x.append( use.Program( 'menutest', obj_files + ['menu/menutest.cpp'] ) )
x.append( use.Program( 'mugentest', obj_files + ['mugen/test.cpp'] ) )

Return( 'x' )
