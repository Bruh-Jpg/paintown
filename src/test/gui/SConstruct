Import('use')

testEnv = use.Clone()
testEnv.VariantDir('test', '../../')
testEnv.VariantDir('common', '../common')

source = Split("""
common/init.cpp
common/timer.cpp
test/configuration.cpp
test/globals.cpp
test/exceptions/exception.cpp
test/factory/font_factory.cpp
test/factory/font_render.cpp
test/util/audio.cpp
test/util/bitmap.cpp
test/util/debug.cpp
test/util/events.cpp
test/util/file-system.cpp
test/util/font.cpp
test/util/ftalleg.cpp
test/util/funcs.cpp
test/util/gradient.cpp
test/util/language-string.cpp
test/util/load_exception.cpp
test/util/messages.cpp
test/util/message-queue.cpp
test/util/system.cpp
test/util/resource.cpp
test/util/sound.cpp
test/util/thread.cpp
test/util/token.cpp
test/util/token_exception.cpp
test/util/tokenreader.cpp
test/util/gui/animation.cpp
test/util/gui/box.cpp
test/util/gui/container.cpp
test/util/gui/context-box.cpp
test/util/gui/coordinate.cpp
test/util/gui/cutscene.cpp
test/util/gui/fadetool.cpp
test/util/gui/lineedit.cpp
test/util/gui/rectarea.cpp
test/util/gui/popup-box.cpp
test/util/gui/scroll-list.cpp
test/util/gui/select-list.cpp
test/util/gui/tabbed-box.cpp
test/util/gui/timer.cpp
test/util/gui/widget.cpp
test/util/input/keyboard.cpp
test/util/input/joystick.cpp
test/util/input/input-manager.cpp
test/util/input/input-source.cpp
test/util/input/input.cpp
test/util/input/text-input.cpp
test/util/input/sdl/joystick.cpp
test/util/network/network.cpp
""")

test_source = Split("""
test.cpp
""")

character_select_source = Split("""
test/paintown-engine/game/character-select.cpp
select-main.cpp
test/mugen/exception.cpp
test/util/ebox.cpp
test/util/loading.cpp
test/util/regex.cpp
test/util/timedifference.cpp
test/openbor/data.cpp
test/openbor/mod.cpp
test/openbor/pack-reader.cpp
test/openbor/util.cpp
test/paintown-engine/game/mod.cpp
test/paintown-engine/game/nameplacer.cpp
test/paintown-engine/game/select_player.cpp
test/paintown-engine/level/utils.cpp
test/paintown-engine/object/animation.cpp
test/paintown-engine/object/animation_event.cpp
test/paintown-engine/object/animation_trail.cpp
test/paintown-engine/object/attack.cpp
test/paintown-engine/object/character.cpp
test/paintown-engine/object/display_character.cpp
test/paintown-engine/object/draw-effect.cpp
test/paintown-engine/object/effect.cpp
test/paintown-engine/object/gib.cpp
test/paintown-engine/object/object.cpp
test/paintown-engine/object/object_attack.cpp
test/paintown-engine/object/object_nonattack.cpp
test/paintown-engine/object/player.cpp
test/paintown-engine/object/player-common.cpp
test/paintown-engine/object/projectile.cpp
test/paintown-engine/script/script.cpp
""")

space_source = Split("""
test/util/gui/coordinate.cpp
test/util/load_exception.cpp
test/util/debug.cpp
test/exceptions/exception.cpp
space.cpp
""")

x = []
# General widget/gui element tests
gui_test = testEnv.Program('gui', source + test_source)
x.append(gui_test)
# Character select test
character_select = testEnv.Program('character-select', source + character_select_source)
x.append(character_select)
# spaces test
# space = testEnv.Program('space', source + space_source)
space = testEnv.Program('space', space_source)
x.append(space)
Return('x')
